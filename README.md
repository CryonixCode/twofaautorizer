# AutoTwoFA

Программа для автоматической переавторизации Telegram-сессий с возможностью изменения двухфакторной аутентификации (2FA) и создания новых сессий.

## Требования

- Python 3.10 или выше
- Аккаунты
- Рабочие SOCKS5-прокси

## Установка

1. **Склонируйте репозиторий** или скопируйте файлы проекта:
   ```
   autotwofa.py, config.py, menu.py, text.py
   ```

2. **Создайте виртуальное окружение** (рекомендуется):
   ```bash
   python -m venv venv
   ```
   - Активируйте:
     - Windows: `venv\Scripts\activate`
     - Linux/MacOS: `source venv/bin/activate`

3. **Установите зависимости**:
   - Сохраните файл `requirements.txt` в корневую папку проекта.
   - Выполните:
     ```bash
     pip install -r requirements.txt
     ```

4. **Настройте файлы**:
   - Создайте папку `sessions` и поместите в неё JSON-файлы с данными аккаунтов. Пример (`sessions/+1234567890.json`):
     ```json
     {
         "phone": "+1234567890",
         "session_file": "+1234567890",
         "app_id": 123456,
         "app_hash": "your_api_hash",
         "device": "Desktop",
         "sdk": "Windows 10",
         "app_version": "3.4.3 x64",
         "lang_pack": "tdesktop",
         "lang_code": "en",
         "system_lang_code": "en-US",
         "twoFA": "your_current_2fa_password"
     }
     ```
   - Создайте файл `proxy.txt` в корневой папке с прокси в формате:
     ```
     # Формат: host:port:username:password
     proxy.example.com:8080:user:pass
     ```

## Запуск

1. Убедитесь, что виртуальное окружение активно.
2. Выполните:
   ```bash
   python autotwofa.py
   ```

## Использование

- **Меню**:
  - `[1] Запустить переавторизацию`: Создаёт новые сессии в папке `new_sessions`, при необходимости изменяет пароль 2FA и закрывает старые сессии (в зависимости от настроек).
  - `[2] Сменить язык`: Выбор между русским и английским.
  - `[3] Настроить параметры`:
    - Количество потоков (по умолчанию 5).
    - Задержка повтора (в секундах, по умолчанию 20).
    - Закрытие старых сессий (да/нет, по умолчанию да).
    - Изменение 2FA (да/нет, по умолчанию да).
  - `[4] Выход`: Завершение работы.

- **Результаты**:
  - Новые сессии и JSON-файлы сохраняются в папке `new_sessions`.
  - Если включено закрытие старых сессий, старые `.session` и `.json` файлы удаляются.

## Логи

- Логи сохраняются в файл `autotwofa.log` в корневой папке.

## Примечания

- Убедитесь, что прокси рабочие и указаны в правильном формате.
- Telegram-сессии (`.session`) в папке `sessions` должны быть авторизованы.
- Если 2FA включён, текущий пароль должен быть указан в JSON-файле (`twoFA` или `password`).
- При ошибках проверяйте логи в `autotwofa.log`.
